// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package components

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

// SearchModal renders the global search modal (Cmd+K / Ctrl+K).
// Place once in the base layout. Fetches results from /api/search?q=...
func SearchModal() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div x-data=\"{\n\t\t\topen: false,\n\t\t\tquery: '',\n\t\t\tresults: [],\n\t\t\tloading: false,\n\t\t\tselectedIdx: -1,\n\t\t\tasync search() {\n\t\t\t\tif (this.query.trim().length < 2) { this.results = []; return; }\n\t\t\t\tthis.loading = true;\n\t\t\t\ttry {\n\t\t\t\t\tconst r = await fetch('/api/search?q=' + encodeURIComponent(this.query));\n\t\t\t\t\tthis.results = await r.json();\n\t\t\t\t\tthis.selectedIdx = this.results.length > 0 ? 0 : -1;\n\t\t\t\t} catch(e) { this.results = []; }\n\t\t\t\tthis.loading = false;\n\t\t\t},\n\t\t\topen() { this.open = true; this.$nextTick(() => this.$refs.input.focus()); },\n\t\t\tclose() { this.open = false; this.query = ''; this.results = []; this.selectedIdx = -1; },\n\t\t\tnavigate(dir) {\n\t\t\t\tif (this.results.length === 0) return;\n\t\t\t\tthis.selectedIdx = (this.selectedIdx + dir + this.results.length) % this.results.length;\n\t\t\t},\n\t\t\tgo() {\n\t\t\t\tif (this.selectedIdx >= 0 && this.results[this.selectedIdx]) {\n\t\t\t\t\twindow.location.href = this.results[this.selectedIdx].url;\n\t\t\t\t}\n\t\t\t}\n\t\t}\" @keydown.meta.k.window.prevent=\"open()\" @keydown.ctrl.k.window.prevent=\"open()\" @keydown.escape.window=\"close()\" @open-search.window=\"open()\"><!-- Backdrop --><div x-show=\"open\" x-transition:enter=\"transition ease-out duration-150\" x-transition:enter-start=\"opacity-0\" x-transition:enter-end=\"opacity-100\" x-transition:leave=\"transition ease-in duration-100\" x-transition:leave-start=\"opacity-100\" x-transition:leave-end=\"opacity-0\" class=\"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm\" @click=\"close()\" style=\"display: none;\" x-cloak></div><!-- Modal --><div x-show=\"open\" x-transition:enter=\"transition ease-out duration-150\" x-transition:enter-start=\"opacity-0 scale-95\" x-transition:enter-end=\"opacity-100 scale-100\" x-transition:leave=\"transition ease-in duration-100\" x-transition:leave-start=\"opacity-100 scale-100\" x-transition:leave-end=\"opacity-0 scale-95\" class=\"fixed inset-x-0 top-20 z-50 mx-auto max-w-2xl px-4\" style=\"display: none;\" x-cloak><div class=\"overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-2xl ring-1 ring-gray-900/10 dark:ring-gray-700\"><!-- Search input --><div class=\"flex items-center gap-3 px-4 py-3 border-b border-gray-200 dark:border-gray-700\"><span class=\"material-icons-outlined text-gray-400 text-xl flex-shrink-0\">search</span> <input x-ref=\"input\" type=\"text\" x-model=\"query\" @input.debounce.200ms=\"search()\" @keydown.arrow-down.prevent=\"navigate(1)\" @keydown.arrow-up.prevent=\"navigate(-1)\" @keydown.enter.prevent=\"go()\" placeholder=\"Search anything... (Cmd+K)\" class=\"flex-1 bg-transparent text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none\"><template x-if=\"loading\"><svg class=\"animate-spin h-4 w-4 text-gray-400 flex-shrink-0\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"></path></svg></template><kbd class=\"hidden sm:inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium text-gray-400 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">Esc</kbd></div><!-- Results --><div x-show=\"results.length > 0\" class=\"max-h-80 overflow-y-auto py-2\"><template x-for=\"(result, idx) in results\" :key=\"result.id\"><a :href=\"result.url\" :class=\"idx === selectedIdx ? 'bg-primary-50 dark:bg-primary-900/20' : 'hover:bg-gray-50 dark:hover:bg-gray-700/50'\" class=\"flex items-center gap-3 px-4 py-2.5 transition-colors\" @mouseenter=\"selectedIdx = idx\"><span class=\"material-icons-outlined text-lg flex-shrink-0\" :class=\"idx === selectedIdx ? 'text-primary-600 dark:text-primary-400' : 'text-gray-400'\" x-text=\"result.icon || 'article'\"></span><div class=\"flex-1 min-w-0\"><p class=\"text-sm font-medium text-gray-900 dark:text-white truncate\" x-text=\"result.title\"></p><p x-show=\"result.subtitle\" class=\"text-xs text-gray-500 dark:text-gray-400 truncate\" x-text=\"result.subtitle\"></p></div><span class=\"text-xs text-gray-400 dark:text-gray-500 flex-shrink-0\" x-text=\"result.resource_type\"></span></a></template></div><!-- Empty state --><div x-show=\"query.length >= 2 && !loading && results.length === 0\" class=\"px-4 py-8 text-center\"><span class=\"material-icons-outlined text-3xl text-gray-300 dark:text-gray-600 block mb-2\">search_off</span><p class=\"text-sm text-gray-500 dark:text-gray-400\">No results for \"<span x-text=\"query\"></span>\"</p></div><!-- Footer hint --><div class=\"flex items-center gap-4 px-4 py-2 border-t border-gray-100 dark:border-gray-700 text-xs text-gray-400\"><span class=\"flex items-center gap-1\"><kbd class=\"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">↑↓</kbd> navigate</span> <span class=\"flex items-center gap-1\"><kbd class=\"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">↵</kbd> open</span> <span class=\"flex items-center gap-1\"><kbd class=\"px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">Esc</kbd> close</span></div></div></div></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
